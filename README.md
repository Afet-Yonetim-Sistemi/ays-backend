# AYS | Afet Yönetim Sistemi API  [![Application Status](https://github.com/afet-yonetim-sistemi/ays-be/actions/workflows/application-health-checker.yml/badge.svg)](https://github.com/afet-yonetim-sistemi/ays-be/actions/workflows/application-health-checker.yml)

## Description

**Disaster Management System** ,which is named as **AYS(AFET YÖNETİM SİSTEMİ)**, is an open source and voluntary
project.
The aim is to manage the needs that arise during a natural disaster.
It manages the coordination of the need processes between volunteers and institutions in the disaster area.

This project is designed to be used by non-governmental organizations and volunteers of related organizations.
Organizations and the volunteers to be registered by the organizations, the needs in the disaster area,
volunteers who are close to the relevant region and need, aims to manage the needs quickly and accurately.

## Processes

- **Institute (Institution) user Processes** :
  It is aimed to ensure resource management of the organization in case of a disaster and to carry out these processes
  according to the relevant scenarios.
  It allocates workloads for volunteers according to the needs and follows up.

- **Admin** :
  The role of Admin takes part in the management of users and institutions that voluntarily participate in the role. It
  follows up institutions and users.


- **User** :
  It represents the users who are in the relevant disaster area and want to take part in disaster processes voluntarily.
  Users who want to participate voluntarily can contact the relevant organizations for the needs in their region.
  can be automatically assigned, or interested volunteers can choose from the needs in their region
  select the most appropriate assignment and complete the relevant process.

## Tech Stack

**Framework**

* Core
    * Spring
        * Spring Boot 3
        * Spring Boot Test (Junit)
        * Spring Boot Dev Tools
        * Spring Web
        * Spring Boot Actuator
        * Spring Doc Open API
        * Spring Security 6
        * Spring OAuth2 Client
        * Spring OAuth2 Resource Server
    * Spring Data
        * Spring Data JPA

**3rd Party Dependencies**

* Lombok
* Test Containers
* Mapstruct
* Easy Random
* JSON Web Token
* JSON Web Signature
* Bouncy Castle

**Database**

* MySQL

**Database Migration Tool**

* Liquibase

**Language**

* Java 17

**Build Tool**

* Maven

**Software Development Process**

* TDD
* Agile Kanban
* Jira

**Version Control**

* Git
* GitHub

**APIs Interaction Platform**

* Postman

**Application Pipeline**

* GitHub Actions

--- 

---

# Getting Started

---

The project has been generated by Spring Initializer.

## Instructions Before Building Project

First of all, generate personal access token with this url : https://github.com/settings/tokens

# Before Running Locally On IDE

> 1. If you have `~/m2/settings.xml` file in your computer, skip the step without reading the after section.
     If you aren't using the `~/.m2/settings.xml` file to actively, you can be back up it before creating
     the new `settings.xml` file, if you want. If you are using actively, after the perform step 3 you can
     manually merge the `settings.xml` file in the project with the `~/.m2/settings.xml` file and skip step 2 and 4.
> 2. While inside the project directory in the terminal; that is, when you are in the `~/afet-yonetim-sistemi/ays-be`
     directory, run the command `cp template-settings.xml settings.xml`.
> 3. In the settings.xml file within the project, replace the `{YOUR_GITHUB_USERNAME}` placeholder with your GitHub
     username and replace `{YOUR_PERSONAL_GITHUB_ACCESS_TOKEN}` with the access token value you created on GitHub as
     described in the instructions under the `'Instructions Before Building The Project'` section.
> 4. If the `.m2` directory has not been created before, you can use the command `mkdir ~/.m2` and then run the
     command `cp settings.xml ~/.m2/settings.xml` for copy the `settings.xml` file located in the project
     to the `~/.m2` directory.

#### Don't forget to enable Lombok pre-processing in your IDE!

## Building The Project With Tests

```
./mvnw clean install
```

## Building The Project Without Tests

```
./mvnw clean install -DskipTests
```

## Running as Docker MySQL container

Before running the project, you need to run the following command to start the MySQL container:

```
docker compose up -d --build database
```

If you want to recreate the MySQL container, you can run the following command:

```
docker compose up --force-recreate -d --build database
```

If you want to stop the MySQL container, you can run the following command:

```
docker compose down -v database
```

---

# Running As Docker Container

> 1. While inside the project directory in the terminal; that is, when you are in the `~/afet-yonetim-sistemi/ays-be`
     directory, run the command `cp template-settings.xml settings.xml`.
> 2. In the `settings.xml` file within the project, replace the `{YOUR_GITHUB_USERNAME}` placeholder with your GitHub
     username and replace `{YOUR_PERSONAL_GITHUB_ACCESS_TOKEN}` with the access token value you created on GitHub as
     described in the instructions under the `'Instructions Before Building The Project'` section.

Before running the project, you need to run the following command to start the project container:

```
docker compose up -d --build
```

If you want to recreate the project container, you can run the following command:

```
docker compose up --force-recreate -d --build 
```

If you want to stop the project container, you can run the following command:

```
docker compose down -v 
```

---

---

# [How to Contribute](https://github.com/afet-yonetim-sistemi/ays-be/edit/main/CONTRIBUTING.md)

The project is managed by [Jira](https://afetyonetimsistemi.atlassian.net/jira/projects).
You can assign an issue from the Todo list and start working on it.

---

## Project Documents

For other information, you can check [Confluence](https://afetyonetimsistemi.atlassian.net/wiki/spaces/AYS/overview)
Page.

---

## Postman

### AYS Local Environments

- [Download Local Postman Environments](https://www.mediafire.com/file/82l4a7z9v3z12ot/ays-be-postman-local-environments.zip/file)

### AYS APIs

- [View Postman Collection](https://documenter.getpostman.com/view/26813504/2s93kz55Jz)
- [Download Postman Collection](https://www.mediafire.com/file/dykop0sb2w0icjv/ays-be-postman-collection.zip/file)

---

---

# Project Infrastucture

<img src="https://bit.ly/3MzggX8" width="7000" alt=""/>
<img src="https://bit.ly/42NeBTQ" width="400" alt=""/>
