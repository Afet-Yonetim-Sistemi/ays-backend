<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.10.xsd">

    <changeSet id="4-ays-ddl" author="agitrubard">
        <!-- ======================== -->
        <!-- DDL of AYS_USER_LOCATION -->
        <!-- ======================== -->
        <createTable tableName="AYS_USER_LOCATION">
            <column name="ID" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="USER_ID" type="VARCHAR(36)">
                <constraints unique="true"
                             nullable="false"
                             foreignKeyName="FK__AYS_USER_LOCATION__USER_ID"
                             referencedTableName="AYS_USER"
                             referencedColumnNames="ID"
                />
            </column>
            <column name="POINT" type="POINT">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_USER" type="VARCHAR(255)" defaultValue="AYS">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="UPDATED_USER" type="VARCHAR(255)"/>
            <column name="UPDATED_AT" type="TIMESTAMP"/>
        </createTable>
        <!-- ======================== -->
        <!-- DDL of AYS_USER_LOCATION -->
        <!-- ======================== -->


        <!-- ========================== -->
        <!-- DDL of AYS_USER_ASSIGNMENT -->
        <!-- ========================== -->
        <createTable tableName="AYS_USER_ASSIGNMENT">
            <column name="ID" type="VARCHAR(36)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="USER_ID" type="VARCHAR(36)">
                <constraints unique="true"
                             foreignKeyName="FK__AYS_USER_ASSIGNMENT__USER_ID"
                             referencedTableName="AYS_USER"
                             referencedColumnNames="ID"
                />
            </column>
            <column name="INSTITUTION_ID" type="VARCHAR(36)">
                <constraints unique="true"
                             foreignKeyName="FK__AYS_USER_ASSIGNMENT__INSTITUTION_ID"
                             referencedTableName="AYS_USER"
                             referencedColumnNames="ID"
                />
            </column>
            <column name="DESCRIPTION" type="VARCHAR(2048)">
                <constraints nullable="false"/>
            </column>
            <column name="FIRST_NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="COUNTRY_CODE" type="INTEGER(5)">
                <constraints nullable="false"/>
            </column>
            <column name="LINE_NUMBER" type="INTEGER(10)">
                <constraints nullable="false"/>
            </column>
            <column name="POINT" type="POINT">
                <constraints nullable="false"/>
            </column>
            <column name="STATUS" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_USER" type="VARCHAR(255)" defaultValue="AYS">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="UPDATED_USER" type="VARCHAR(255)"/>
            <column name="UPDATED_AT" type="TIMESTAMP"/>
        </createTable>

        <sql>
            ALTER TABLE `AYS_USER_ASSIGNMENT`
                ADD CONSTRAINT `C__AYS_USER_ASSIGNMENT__STATUS` CHECK (`STATUS` IN ('AVAILABLE', 'RESERVED', 'ASSIGNED', 'IN_PROGRESS', 'DONE'));
        </sql>
        <!-- ========================== -->
        <!-- DDL of AYS_USER_ASSIGNMENT -->
        <!-- ========================== -->
    </changeSet>

</databaseChangeLog>